<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=description content="An unofficial Microbit v2 API reference & guide book."><meta name=author content="c272"><link rel=icon href=/images/favicon.png type=image/png><title>Setting up a Debug Environment - micro:bit v2 Documentation</title><link href=/css/nucleus.css?1661524582 rel=stylesheet><link href=/css/fontawesome-all.min.css?1661524582 rel=stylesheet><link href=/css/hybrid.css?1661524582 rel=stylesheet><link href=/css/featherlight.min.css?1661524582 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1661524582 rel=stylesheet><link href=/css/auto-complete.css?1661524582 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1661524582 rel=stylesheet><link href=/css/theme.css?1661524582 rel=stylesheet><link href=/css/tabs.css?1661524582 rel=stylesheet><link href=/css/hugo-theme.css?1661524582 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1661524582></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/setup/debug-setup-guide/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img id=grav-logo src=/images/logo.png style=width:100%;height:100%></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1661524582></script>
<script type=text/javascript src=/js/auto-complete.js?1661524582></script>
<script type=text/javascript>var baseurl="https://microbit.c272.org/"</script><script type=text/javascript src=/js/search.js?1661524582></script></div><div class=highlightable><ul class=topics><li data-nav-id=/setup/ title=Setup class="dd-item
parent"><a href=/setup/><b>1. </b>Setup</a><ul><li data-nav-id=/setup/linux-install-guide/ title="Installing on Linux" class=dd-item><a href=/setup/linux-install-guide/>Installing on Linux</a></li><li data-nav-id=/setup/mac-install-guide/ title="Installing on MacOS" class=dd-item><a href=/setup/mac-install-guide/>Installing on MacOS</a></li><li data-nav-id=/setup/windows-install-guide/ title="Installing on Windows" class=dd-item><a href=/setup/windows-install-guide/>Installing on Windows</a></li><li data-nav-id=/setup/using-micro-tools/ title="Configuring & Using micro-tools" class=dd-item><a href=/setup/using-micro-tools/>Configuring & Using micro-tools</a></li><li data-nav-id=/setup/debug-setup-guide/ title="Setting up a Debug Environment" class="dd-item active"><a href=/setup/debug-setup-guide/>Setting up a Debug Environment</a></li></ul></li><li data-nav-id=/guides/ title=Guides class=dd-item><a href=/guides/><b>2. </b>Guides</a><ul><li data-nav-id=/guides/first-microbit-project/ title="'Hello World' with micro:bit v2" class=dd-item><a href=/guides/first-microbit-project/>'Hello World' with micro:bit v2</a></li></ul></li><li data-nav-id=/api-reference/ title="API Reference" class=dd-item><a href=/api-reference/><b>3. </b>API Reference</a></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> by <a href=https://github.com/c272>C272</a>.<br></p><p style=color:#64586e;margin-top:.5em>This site is not affiliated, associated, authorized, or endorsed by the BBC or Lancaster University.</p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > <a href=/setup/>Setup</a> > Setting up a Debug Environment</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#installing-visual-studio-code>Installing Visual Studio Code</a></li><li><a href=#installing-openocd>Installing OpenOCD</a></li><li><a href=#installing-pyocd>Installing pyOCD</a></li><li><a href=#starting-the-debugger>Starting the Debugger</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Setting up a Debug Environment</h1><p>The micro:bit v2 supports debugging over its provided programming port, allowing you to view the contents of memory and control the stepping of execution at runtime. To access this functionality, we will use <a href=https://code.visualstudio.com/>Visual Studio Code</a> with the <code>marus25.cortex-debug</code> extension, along with one of <a href>OpenOCD</a> or <a href>pyOCD</a> to provide debugging interaction with the micro:bit v2&rsquo;s Cortex M0 (nRF51822) CPU. The selection of these should largely not matter, as they both provide sufficient debugging support for the extension that will interact with them.</p><h2 id=installing-visual-studio-code>Installing Visual Studio Code</h2><p>To begin with, we should first install Visual Studio Code. If you&rsquo;ve already done this, skip straight to the next step. For users on Windows and MacOS, you should download the latest version found at the official <a href=https://code.visualstudio.com/Download>download page</a>. However, if you&rsquo;re on a Linux distribution, you can likely install it straight from your package manager or via. Snap:</p><div class=tab-panel><div class=tab-nav><button data-tab-item=ubuntu/debian data-tab-group=default class="tab-nav-button btn active" onclick='switchTab("default","ubuntu/debian")'>ubuntu/debian</button>
<button data-tab-item=void data-tab-group=default class="tab-nav-button btn" onclick='switchTab("default","void")'>void</button>
<button data-tab-item=snap data-tab-group=default class="tab-nav-button btn" onclick='switchTab("default","snap")'>snap</button></div><div class=tab-content><div data-tab-item=ubuntu/debian data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install software-properties-common apt-transport-https wget -y
</span></span><span style=display:flex><span>wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | sudo apt-key add -
</span></span><span style=display:flex><span>sudo add-apt-repository <span style=color:#e6db74>&#34;deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main&#34;</span>
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install code
</span></span></code></pre></div></div><div data-tab-item=void data-tab-group=default class=tab-item><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo xbps-install -Su code-oss
</span></span></code></pre></div></div><div data-tab-item=snap data-tab-group=default class=tab-item><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo snap install --classic code
</span></span></code></pre></div></div></div></div><p>Once this is done, you should also install the <code>marus25.cortex-debug</code> extension from the extensions marketplace. This will provide interaction between the VSCode debugger and either OpenOCD or pyOCD, allowing us to interact with the micro:bit. Before we can utilise this extension though, we must first install either OpenOCD or pyOCD.</p><h2 id=installing-openocd>Installing OpenOCD</h2><p>If you have chosen to install OpenOCD, it is available officially through most package managers on Linux, and through an <a href=https://github.com/openocd-org/openocd/releases/tag/v0.11.0>automatically generated release binary</a> from Github for Windows MinGW32 users. There are no officially released MacOS binaries, however there are alternative unofficial binaries provided by the <code>xpack-dev-tools</code> project, which provide binaries for <a href=https://github.com/xpack-dev-tools/openocd-xpack/releases>MacOS ARM64</a>, <a href=https://github.com/xpack-dev-tools/openocd-xpack/releases>MacOS x64</a>, <a href=https://github.com/xpack-dev-tools/openocd-xpack/releases>Windows x64</a>, <a href=https://github.com/xpack-dev-tools/openocd-xpack/releases>Linux x64</a>, and <a href=https://github.com/xpack-dev-tools/openocd-xpack/releases>Linux ARM64</a>. If you simply wish to install through a package manager however, you can do that like so:</p><div class=tab-panel><div class=tab-nav><button data-tab-item=ubuntu/debian data-tab-group=default class="tab-nav-button btn active" onclick='switchTab("default","ubuntu/debian")'>ubuntu/debian</button>
<button data-tab-item=void data-tab-group=default class="tab-nav-button btn" onclick='switchTab("default","void")'>void</button></div><div class=tab-content><div data-tab-item=ubuntu/debian data-tab-group=default class="tab-item active"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install openocd
</span></span></code></pre></div></div><div data-tab-item=void data-tab-group=default class=tab-item><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo xbps-install -Su openocd
</span></span></code></pre></div></div></div></div><div class="notices info"><p>Packages installed through package managers are not always guaranteed to be the latest version of the software, especially on non rolling-release platforms such as Ubuntu and Debian. If you require features that are only available on the latest version of these softwares, then ensure your package manager has the appropriate version, or install directly from the developer releases.</p></div><h2 id=installing-pyocd>Installing pyOCD</h2><p>If you have chosen to install pyOCD, you can simply install it through the developer&rsquo;s official PyPI package. Ensure you have <code>python3</code> installed as a package beforehand.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 -m pip install -U pyocd
</span></span></code></pre></div><p>If you have not previously installed tools through <code>pip</code> before, you may also need to add the Python <code>.local/bin</code> folder to your PATH. To do this on Linux, in <code>.bashrc</code> (or any similar shell config file), add the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>~/.local/bin:$PATH
</span></span></code></pre></div><p>This will require a fresh terminal to take effect. Once PATH is updated, you can verify pyOCD is installed correctly by running <code>pyocd --version</code>.</p><h2 id=starting-the-debugger>Starting the Debugger</h2><p>To begin debugging a micro:bit v2 program, first ensure that your program is built with <code>python3 build.py</code>, and then select the <code>Run -> Start Debugging</code> option from the Visual Studio Code toolbar. This will then prompt you to select either OpenOCD or pyOCD. Select the one that you installed in the prior steps, and the debugger should begin. To stop the debugger at a specific point, set a <strong>breakpoint</strong> in the editor by clicking to the left of the line number column in the editor window.</p><p><img src=/screenshots/start-debugging.png alt="Start Debugging Screenshot"></p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1661524582></script>
<script src=/js/perfect-scrollbar.min.js?1661524582></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1661524582></script>
<script src=/js/jquery.sticky.js?1661524582></script>
<script src=/js/featherlight.min.js?1661524582></script>
<script src=/js/highlight.pack.js?1661524582></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1661524582></script>
<script src=/js/learn.js?1661524582></script>
<script src=/js/hugo-learn.js?1661524582></script>
<script src=/mermaid/mermaid.js?1661524582></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>