<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content="An unofficial Microbit v2 API reference & guide book."><meta name=author content="c272"><link rel=icon href=/images/favicon.png type=image/png><title>KeyValueStorage - micro:bit v2 Documentation</title><link href=/css/nucleus.css?1675177347 rel=stylesheet><link href=/css/fontawesome-all.min.css?1675177347 rel=stylesheet><link href=/css/hybrid.css?1675177347 rel=stylesheet><link href=/css/featherlight.min.css?1675177347 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1675177347 rel=stylesheet><link href=/css/auto-complete.css?1675177347 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1675177347 rel=stylesheet><link href=/css/theme.css?1675177347 rel=stylesheet><link href=/css/tabs.css?1675177347 rel=stylesheet><link href=/css/hugo-theme.css?1675177347 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1675177347></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style></head><body data-url=/api-reference/core/keyvaluestorage/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img id=grav-logo src=/images/logo.png style=width:100%;height:100%></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1675177347></script>
<script type=text/javascript src=/js/auto-complete.js?1675177347></script>
<script type=text/javascript>var baseurl="https://microbit.c272.org/"</script><script type=text/javascript src=/js/search.js?1675177347></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/setup/ title=Setup class=dd-item><a href=/setup/><b>1. </b>Setup</a><ul><li data-nav-id=/setup/linux-install-guide/ title="Installing on Linux" class=dd-item><a href=/setup/linux-install-guide/>Installing on Linux</a></li><li data-nav-id=/setup/mac-install-guide/ title="Installing on MacOS" class=dd-item><a href=/setup/mac-install-guide/>Installing on MacOS</a></li><li data-nav-id=/setup/windows-install-guide/ title="Installing on Windows" class=dd-item><a href=/setup/windows-install-guide/>Installing on Windows</a></li><li data-nav-id=/setup/using-micro-tools/ title="Configuring & Using micro-tools" class=dd-item><a href=/setup/using-micro-tools/>Configuring & Using micro-tools</a></li><li data-nav-id=/setup/debug-setup-guide/ title="Setting up a Debug Environment" class=dd-item><a href=/setup/debug-setup-guide/>Setting up a Debug Environment</a></li></ul></li><li data-nav-id=/guides/ title=Guides class=dd-item><a href=/guides/><b>2. </b>Guides</a><ul><li data-nav-id=/guides/hello-world/ title="'Hello World' with micro:bit v2" class=dd-item><a href=/guides/hello-world/>'Hello World' with micro:bit v2</a></li><li data-nav-id=/guides/using-the-filesystem/ title="Using the micro:bit file system" class=dd-item><a href=/guides/using-the-filesystem/>Using the micro:bit file system</a></li><li data-nav-id=/guides/logging/ title="Logging with MicroBitLog" class=dd-item><a href=/guides/logging/>Logging with MicroBitLog</a></li><li data-nav-id=/guides/serial/ title="Interacting over serial I/O" class=dd-item><a href=/guides/serial/>Interacting over serial I/O</a></li></ul></li><li data-nav-id=/api-reference/ title="API Reference" class="dd-item
parent"><a href=/api-reference/><b>3. </b>API Reference</a><ul><li data-nav-id=/api-reference/core/ title=codal-core class="dd-item
parent"><a href=/api-reference/core/>codal-core</a><ul><li data-nav-id=/api-reference/core/accelerometer/ title=Accelerometer class=dd-item><a href=/api-reference/core/accelerometer/>Accelerometer</a></li><li data-nav-id=/api-reference/core/button/ title=Button class=dd-item><a href=/api-reference/core/button/>Button</a></li><li data-nav-id=/api-reference/core/compass/ title=Compass class=dd-item><a href=/api-reference/core/compass/>Compass</a></li><li data-nav-id=/api-reference/core/coordinatespace/ title=CoordinateSpace class=dd-item><a href=/api-reference/core/coordinatespace/>CoordinateSpace</a></li><li data-nav-id=/api-reference/core/keyvaluestorage/ title=KeyValueStorage class="dd-item active"><a href=/api-reference/core/keyvaluestorage/>KeyValueStorage</a></li><li data-nav-id=/api-reference/core/ledmatrix/ title=LEDMatrix class=dd-item><a href=/api-reference/core/ledmatrix/>LEDMatrix</a></li><li data-nav-id=/api-reference/core/managedbuffer/ title=ManagedBuffer class=dd-item><a href=/api-reference/core/managedbuffer/>ManagedBuffer</a></li><li data-nav-id=/api-reference/core/managedstring/ title=ManagedString class=dd-item><a href=/api-reference/core/managedstring/>ManagedString</a></li><li data-nav-id=/api-reference/core/messagebus/ title=MessageBus class=dd-item><a href=/api-reference/core/messagebus/>MessageBus</a></li><li data-nav-id=/api-reference/core/multibutton/ title=MultiButton class=dd-item><a href=/api-reference/core/multibutton/>MultiButton</a></li><li data-nav-id=/api-reference/core/nvmcontroller/ title=NVMController class=dd-item><a href=/api-reference/core/nvmcontroller/>NVMController</a></li><li data-nav-id=/api-reference/core/pin/ title=Pin class=dd-item><a href=/api-reference/core/pin/>Pin</a></li><li data-nav-id=/api-reference/core/sample3d/ title=Sample3D class=dd-item><a href=/api-reference/core/sample3d/>Sample3D</a></li><li data-nav-id=/api-reference/core/timer/ title=Timer class=dd-item><a href=/api-reference/core/timer/>Timer</a></li><li data-nav-id=/api-reference/core/touchbutton/ title=TouchButton class=dd-item><a href=/api-reference/core/touchbutton/>TouchButton</a></li><li data-nav-id=/api-reference/core/license/ title="License & Attribution" class=dd-item><a href=/api-reference/core/license/>License & Attribution</a></li></ul></li><li data-nav-id=/api-reference/microbit-v2/ title=codal-microbit-v2 class=dd-item><a href=/api-reference/microbit-v2/>codal-microbit-v2</a><ul><li data-nav-id=/api-reference/microbit-v2/microbit/ title=MicroBit class=dd-item><a href=/api-reference/microbit-v2/microbit/>MicroBit</a></li><li data-nav-id=/api-reference/microbit-v2/microbitaudio/ title=MicroBitAudio class=dd-item><a href=/api-reference/microbit-v2/microbitaudio/>MicroBitAudio</a></li><li data-nav-id=/api-reference/microbit-v2/microbitblemanager/ title=MicroBitBLEManager class=dd-item><a href=/api-reference/microbit-v2/microbitblemanager/>MicroBitBLEManager</a></li><li data-nav-id=/api-reference/microbit-v2/microbitcompasscalibrator/ title=MicroBitCompassCalibrator class=dd-item><a href=/api-reference/microbit-v2/microbitcompasscalibrator/>MicroBitCompassCalibrator</a></li><li data-nav-id=/api-reference/microbit-v2/microbitdisplay/ title=MicroBitDisplay class=dd-item><a href=/api-reference/microbit-v2/microbitdisplay/>MicroBitDisplay</a></li><li data-nav-id=/api-reference/microbit-v2/microbiti2c/ title=MicroBitI2C class=dd-item><a href=/api-reference/microbit-v2/microbiti2c/>MicroBitI2C</a></li><li data-nav-id=/api-reference/microbit-v2/microbitio/ title=MicroBitIO class=dd-item><a href=/api-reference/microbit-v2/microbitio/>MicroBitIO</a></li><li data-nav-id=/api-reference/microbit-v2/microbitlog/ title=MicroBitLog class=dd-item><a href=/api-reference/microbit-v2/microbitlog/>MicroBitLog</a></li><li data-nav-id=/api-reference/microbit-v2/microbitpowermanager/ title=MicroBitPowerManager class=dd-item><a href=/api-reference/microbit-v2/microbitpowermanager/>MicroBitPowerManager</a></li><li data-nav-id=/api-reference/microbit-v2/microbitradio/ title=MicroBitRadio class=dd-item><a href=/api-reference/microbit-v2/microbitradio/>MicroBitRadio</a></li><li data-nav-id=/api-reference/microbit-v2/microbitthermometer/ title=MicroBitThermometer class=dd-item><a href=/api-reference/microbit-v2/microbitthermometer/>MicroBitThermometer</a></li><li data-nav-id=/api-reference/microbit-v2/microbitusbflashmanager/ title=MicroBitUSBFlashManager class=dd-item><a href=/api-reference/microbit-v2/microbitusbflashmanager/>MicroBitUSBFlashManager</a></li><li data-nav-id=/api-reference/microbit-v2/license/ title="License & Attribution" class=dd-item><a href=/api-reference/microbit-v2/license/>License & Attribution</a></li></ul></li><li data-nav-id=/api-reference/nrf52/ title=codal-nrf52 class=dd-item><a href=/api-reference/nrf52/>codal-nrf52</a><ul><li data-nav-id=/api-reference/nrf52/nrf52adc/ title=NRF52ADC class=dd-item><a href=/api-reference/nrf52/nrf52adc/>NRF52ADC</a></li><li data-nav-id=/api-reference/nrf52/nrf52flashmanager/ title=NRF52FlashManager class=dd-item><a href=/api-reference/nrf52/nrf52flashmanager/>NRF52FlashManager</a></li><li data-nav-id=/api-reference/nrf52/nrf52pin/ title=NRF52Pin class=dd-item><a href=/api-reference/nrf52/nrf52pin/>NRF52Pin</a></li><li data-nav-id=/api-reference/nrf52/nrf52serial/ title=NRF52Serial class=dd-item><a href=/api-reference/nrf52/nrf52serial/>NRF52Serial</a></li><li data-nav-id=/api-reference/nrf52/nrf52touchsensor/ title=NRF52TouchSensor class=dd-item><a href=/api-reference/nrf52/nrf52touchsensor/>NRF52TouchSensor</a></li><li data-nav-id=/api-reference/nrf52/nrflowleveltimer/ title=NRFLowLevelTimer class=dd-item><a href=/api-reference/nrf52/nrflowleveltimer/>NRFLowLevelTimer</a></li><li data-nav-id=/api-reference/nrf52/license/ title="License & Attribution" class=dd-item><a href=/api-reference/nrf52/license/>License & Attribution</a></li></ul></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> by <a href=https://github.com/c272>C272</a>.<br></p><p style=color:#64586e;margin-top:.5em>This site is not affiliated, associated, authorized, or endorsed by the BBC or Lancaster University.</p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > <a href=/api-reference/>API Reference</a> > <a href=/api-reference/core/>codal-core</a> > KeyValueStorage</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#usage--examples>Usage & Examples</a></li><li><a href=#methods>Methods</a><ul><li><a href=#keyvaluestoragenvmcontroller->KeyValueStorage(NVMController&, &mldr;)</a></li><li><a href=#putconst-char-uint8_t-int>put(const char*, uint8_t*, int)</a></li><li><a href=#putmanagedstring-uint8_t-int>put(ManagedString, uint8_t*, int)</a></li><li><a href=#getconst-char>get(const char*)</a></li><li><a href=#getconst-char-1>get(const char*)</a></li><li><a href=#removeconst-char>remove(const char*)</a></li><li><a href=#removemanagedstring>remove(ManagedString)</a></li><li><a href=#size>size()</a></li><li><a href=#wipe>wipe()</a></li></ul></li><li><a href=#structs>Structs</a><ul><li><a href=#keyvaluepair>KeyValuePair</a></li></ul></li><li><a href=#class-definition>Class Definition</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>KeyValueStorage</h1><div style=margin:auto;text-align:center;width:><p>A simple key-value storage medium implemented with flash as the backing store. Utilises an in-memory scratch buffer.</p><p><strong>Version:</strong> <code>fb16846</code><br><strong>Canonical type name:</strong> <code>codal::KeyValueStorage</code><br><strong>Defined within:</strong> <code>inc/drivers/KeyValueStorage.h</code></p></div><h2 id=usage--examples>Usage & Examples</h2><p>A common valid use case for key value storage may be to store configuration data for the application which is persistent over multiple power cycles. We can initialise some default values on startup, and then update them as the user requests while keeping them persistent across runs. For this example, we&rsquo;ll use the KeyValueStorage created by <a href=/api-reference/microbit-v2/microbit/>MicroBit</a>, however this would be the same on a separate instance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>//Have we already initialised the config?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (uBit.storage.get(<span style=color:#e6db74>&#34;initialised&#34;</span>) <span style=color:#f92672>==</span> NULL) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//No, create default values.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>uint8_t</span> defaultConfigValue <span style=color:#f92672>=</span> <span style=color:#ae81ff>21</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>uint8_t</span> magic <span style=color:#f92672>=</span> <span style=color:#ae81ff>0xE770</span>;
</span></span><span style=display:flex><span>    uBit.storage.put(<span style=color:#e6db74>&#34;initialised&#34;</span>, <span style=color:#f92672>&amp;</span>magic, <span style=color:#66d9ef>sizeof</span>(magic));
</span></span><span style=display:flex><span>    uBit.storage.put(<span style=color:#e6db74>&#34;someConfigValue&#34;</span>, <span style=color:#f92672>&amp;</span>defaultConfigValue, <span style=color:#66d9ef>sizeof</span>(defaultConfigValue));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Update the config value if button pressed.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (uBit.buttonA.isPressed()) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>uint8_t</span> newValue <span style=color:#f92672>=</span> uBit.storage.get(<span style=color:#e6db74>&#34;someConfigValue&#34;</span>)<span style=color:#f92672>-&gt;</span>value[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>    uBit.storage.put(<span style=color:#e6db74>&#34;someConfigValue&#34;</span>, <span style=color:#f92672>&amp;</span>newValue, <span style=color:#66d9ef>sizeof</span>(newValue));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the above example, we&rsquo;re checking whether a key value pair &ldquo;initialised&rdquo; is present on the storage, and if not, initialising our default values. Of course, in these default values, we must also create &ldquo;initialise&rdquo;, otherwise this would run on every startup. We also create a key value pair with key &ldquo;someConfigValue&rdquo;, for later editing. In another part of our code, we can then simply update the value with <code>put</code> (unlike dictionaries in most languages, you do not <code>get</code> and then edit a reference, instead simply <code>push</code> the same key again to update).</p><h2 id=methods>Methods</h2><h3 id=keyvaluestoragenvmcontroller->KeyValueStorage(NVMController&, &mldr;)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>KeyValueStorage(NVMController<span style=color:#f92672>&amp;</span> controller, <span style=color:#66d9ef>int</span> pageNumber <span style=color:#f92672>=</span> DEVICE_KEY_VALUE_STORE_OFFSET);
</span></span></code></pre></div><p>Creates an instance of KeyValueStorage using the given non-volatile backing storage, starting at the provided logical page number. You can also use negative numbers for this parameter to count back from the last page. The default value is <code>DEVICE_KEY_VALUE_STORE_OFFSET</code>, which evaluates to <code>-4</code> (four pages from the end of flash).</p><p><strong>Parameters</strong><br>- <code>controller</code> (<em><a href=/api-reference/core/nvmcontroller/>NVMController</a>&</em>): The non-volatile storage controller to use.<br>- <code>pageNumber</code> (<em>int</em>, optional): The logical page number at which the key value storage should start.</p><h3 id=putconst-char-uint8_t-int>put(const char*, uint8_t*, int)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>put</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key, <span style=color:#66d9ef>uint8_t</span><span style=color:#f92672>*</span> data, <span style=color:#66d9ef>int</span> dataSize);
</span></span></code></pre></div><p>Places data onto the key value storage medium using a C-style constant string as the key. Data must be 32 bytes or smaller, key must be 16 bytes or shorter (including null terminator).</p><p><strong>Parameters</strong><br>- <code>key</code> (<em>const char*</em>): The key to use for this key-value pair, as a C-style string constant.<br>- <code>data</code> (<em>uint8_t*</em>): A pointer to the data that will be copied into the key value storage.<br>- <code>dataSize</code> (<em>int</em>): The size of the data to be copied into the key value storage.</p><p><strong>Returns</strong> - On success, returns <code>KEY_VALUE_OK</code>. If the key or data sizes are too large, <code>KEY_VALUE_INVALID_PARAMETER</code> will be returned. If the storage page is full, <code>KEY_VALUE_NO_RESOURCES</code> will be returned.</p><h3 id=putmanagedstring-uint8_t-int>put(ManagedString, uint8_t*, int)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>put</span>(ManagedString key, <span style=color:#66d9ef>uint8_t</span><span style=color:#f92672>*</span> data, <span style=color:#66d9ef>int</span> dataSize);
</span></span></code></pre></div><p>Places data onto the key value storage medium using a CODAL <a href=/api-reference/core/managedstring/>ManagedString</a> as the key. Data must be 32 bytes or smaller, key must be 16 bytes or shorter (including null terminator).</p><p><strong>Parameters</strong><br>- <code>key</code> (<em><a href=/api-reference/core/managedstring/>ManagedString</a></em>): The key to use for this key-value pair, as a CODAL string.<br>- <code>data</code> (<em>uint8_t*</em>): A pointer to the data that will be copied into the key value storage.<br>- <code>dataSize</code> (<em>int</em>): The size of the data to be copied into the key value storage.</p><p><strong>Returns</strong> - On success, returns <code>KEY_VALUE_OK</code>. If the key or data sizes are too large, <code>KEY_VALUE_INVALID_PARAMETER</code> will be returned. If the storage page is full, <code>KEY_VALUE_NO_RESOURCES</code> will be returned.</p><h3 id=getconst-char>get(const char*)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>KeyValuePair<span style=color:#f92672>*</span> <span style=color:#a6e22e>get</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key);
</span></span></code></pre></div><p>Returns the key value pair which contains a matching key to the C-style string passed in.</p><p><strong>Parameters</strong><br>- <code>key</code> (<em>const char*</em>): The C-style string key of the key value pair to retrieve.</p><p><strong>Returns</strong> - If the key is found, a pointer to a heap allocated <a href=#keyvaluepair>KeyValuePair</a>. Otherwise, <code>NULL</code>.</p><h3 id=getconst-char-1>get(const char*)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>KeyValuePair<span style=color:#f92672>*</span> <span style=color:#a6e22e>get</span>(ManagedString key);
</span></span></code></pre></div><p>Returns the key value pair which contains a matching key to the CODAL <a href=/api-reference/core/managedstring/>ManagedString</a> passed in.</p><p><strong>Parameters</strong><br>- <code>key</code> (<em><a href=/api-reference/core/managedstring/>ManagedString</a></em>): The CODAL string key of the key value pair to retrieve.</p><p><strong>Returns</strong> - If the key is found, a pointer to a heap allocated <a href=#keyvaluepair>KeyValuePair</a>. Otherwise, <code>NULL</code>.</p><h3 id=removeconst-char>remove(const char*)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>remove</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key);
</span></span></code></pre></div><p>Removes the key value pair containing a matching key to the provided C-style string from the key value storage.</p><p><strong>Parameters</strong><br>- <code>key</code> (<em>const char*</em>): The C-style string key of the key value pair to remove.</p><p><strong>Returns</strong> - If the key is found and removed, <code>KEY_VALUE_OK</code>. Otherwise, <code>KEY_VALUE_NO_DATA</code>.</p><h3 id=removemanagedstring>remove(ManagedString)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>remove</span>(ManagedString key);
</span></span></code></pre></div><p>Removes the key value pair containing a matching key to the provided CODAL <a href=/api-reference/core/managedstring/>ManagedString</a> from the key value storage.</p><p><strong>Parameters</strong><br>- <code>key</code> (<em><a href=/api-reference/core/managedstring/>ManagedString</a></em>): The CODAL string key of the key value pair to remove.</p><p><strong>Returns</strong> - If the key is found and removed, <code>KEY_VALUE_OK</code>. Otherwise, <code>KEY_VALUE_NO_DATA</code>.</p><h3 id=size>size()</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>size</span>();
</span></span></code></pre></div><p>Returns the number of entries currently stored in the key value storage.</p><p><strong>Returns</strong> - The number of entries currently in the key value store.</p><h3 id=wipe>wipe()</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>wipe</span>();
</span></span></code></pre></div><p>Erases the current contents of the key value store.</p><p><strong>Returns</strong> - <code>DEVICE_OK</code>.</p><h2 id=structs>Structs</h2><h3 id=keyvaluepair>KeyValuePair</h3><p>Represents a single key value pair within the key value storage. Maximum sizes of each element are stated as preprocessor defines, and currently evaluate to a limit of 16 bytes for the key and 32 bytes for the value.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>KeyValuePair</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>uint8_t</span> key[KEY_VALUE_STORAGE_KEY_SIZE]; <span style=color:#75715e>//key[16]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>uint8_t</span> value[KEY_VALUE_STORAGE_VALUE_SIZE]; <span style=color:#75715e>//value[32]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><h2 id=class-definition>Class Definition</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>KeyValueStorage</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        KeyValueStorage(NVMController<span style=color:#f92672>&amp;</span> controller, <span style=color:#66d9ef>int</span> pageNumber <span style=color:#f92672>=</span> DEVICE_KEY_VALUE_STORE_OFFSET);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>put</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key, <span style=color:#66d9ef>uint8_t</span><span style=color:#f92672>*</span> data, <span style=color:#66d9ef>int</span> dataSize);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>put</span>(ManagedString key, <span style=color:#66d9ef>uint8_t</span><span style=color:#f92672>*</span> data, <span style=color:#66d9ef>int</span> dataSize);
</span></span><span style=display:flex><span>        KeyValuePair<span style=color:#f92672>*</span> <span style=color:#a6e22e>get</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key);
</span></span><span style=display:flex><span>        KeyValuePair<span style=color:#f92672>*</span> <span style=color:#a6e22e>get</span>(ManagedString key);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>remove</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> key);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>remove</span>(ManagedString key);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>size</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>wipe</span>();
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1675177347></script>
<script src=/js/perfect-scrollbar.min.js?1675177347></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1675177347></script>
<script src=/js/jquery.sticky.js?1675177347></script>
<script src=/js/featherlight.min.js?1675177347></script>
<script src=/js/highlight.pack.js?1675177347></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1675177347></script>
<script src=/js/learn.js?1675177347></script>
<script src=/js/hugo-learn.js?1675177347></script>
<script src=/mermaid/mermaid.js?1675177347></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>